<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cogitron Neural v12 - Vercel</title>
    <style>
        :root { --blue: #00f2fe; --purple: #9d50bb; --bg: #050505; }
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Inter', sans-serif; background: var(--bg); color: white; overflow: hidden; }
        
        /* LOGIN */
        #login-screen { position: fixed; inset: 0; background: #000; display: flex; justify-content: center; align-items: center; z-index: 10000; }
        .card { padding: 40px; border-radius: 20px; border: 1px solid var(--blue); background: #0a0a0a; text-align: center; width: 320px; }
        input, select { background: #1a1a1a; border: 1px solid #333; color: white; padding: 12px; border-radius: 10px; width: 100%; margin: 10px 0; box-sizing: border-box; }
        button { background: linear-gradient(45deg, var(--blue), var(--purple)); border: none; color: white; padding: 15px; border-radius: 10px; cursor: pointer; width: 100%; font-weight: bold; }

        /* INTERFACE */
        #main-ui { display: none; height: 100vh; flex-direction: column; }
        .top-bar { height: 60px; border-bottom: 1px solid #222; display: flex; align-items: center; padding: 0 20px; justify-content: space-between; }
        #chat-display { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { padding: 12px 18px; border-radius: 15px; max-width: 80%; line-height: 1.5; }
        .user-msg { background: #1a1a1a; align-self: flex-end; border: 1px solid #333; }
        .ai-msg { background: #0d0d0d; align-self: flex-start; border-left: 3px solid var(--blue); }
        .input-area { padding: 20px; background: #000; border-top: 1px solid #222; display: flex; gap: 10px; }
        #userInput { flex: 1; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="card">
            <h2 style="color: var(--blue)">COGITRON v12</h2>
            <input type="text" id="reg-name" placeholder="Ton Prénom">
            <select id="reg-age">
                <option value="enfant">Mode Enfant (Simple)</option>
                <option value="ado">Mode Ado (Expert)</option>
            </select>
            <button onclick="start()">DÉMARRER</button>
        </div>
    </div>

    <div id="main-ui">
        <div class="top-bar">
            <span>COGITRON <b>NEURAL</b></span>
            <span id="user-tag" style="color: var(--blue)"></span>
        </div>
        <div id="chat-display"></div>
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Dis quelque chose...">
            <button onclick="askAI()" style="width: auto; padding: 10px 20px;">ENVOYER</button>
        </div>
    </div>

    <script>
        // METS TA CLÉ ICI ENTRE LES GUILLEMETS
        const API_KEY = "gsk_CrgZ9aI8p2jrtas3gwRdWGdyb3FYnqS9kInNUg87Mu"; 
        
        let user = { name: "", age: "" };

        function start() {
            user.name = document.getElementById('reg-name').value;
            user.age = document.getElementById('reg-age').value;
            if(!user.name) return alert("Prénom requis");
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('main-ui').style.display = 'flex';
            document.getElementById('user-tag').innerText = user.name;
            addMsg("ai", `Système prêt. Bonjour ${user.name} ! Je suis ton IA connectée à Llama 3.`);
        }

        function addMsg(type, text) {
            const d = document.getElementById('chat-display');
            d.innerHTML += `<div class="msg ${type}-msg"><b>${type === 'ai' ? 'Cogitron' : 'Toi'}:</b><br>${text}</div>`;
            d.scrollTop = d.scrollHeight;
        }

        async function askAI() {
            const input = document.getElementById('userInput');
            const prompt = input.value;
            if(!prompt) return;

            addMsg("user", prompt);
            input.value = "";

            // Le système de "Prompt" qui définit la personnalité
            const systemPrompt = user.age === 'enfant' 
                ? "Tu es une IA pour enfants de 5 ans. Parle de façon très simple, joyeuse et utilise des emojis."
                : "Tu es une IA cool pour ados. Réponds de façon précise, avec du style, en parlant de trucs comme YouTube, le gaming ou la science.";

            try {
                const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${API_KEY}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: "llama3-8b-8192",
                        messages: [
                            { role: "system", content: systemPrompt },
                            { role: "user", content: prompt }
                        ]
                    })
                });

                const data = await response.json();
                const aiReply = data.choices[0].message.content;
                addMsg("ai", aiReply);
            } catch (err) {
                addMsg("ai", "Erreur de connexion. Vérifie ta clé API dans le code !");
            }
        }
    </script>
</body>
</html>
